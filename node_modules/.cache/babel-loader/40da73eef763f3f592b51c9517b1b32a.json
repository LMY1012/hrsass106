{"remainingRequest":"C:\\Users\\陌上花开，可缓缓归归矣\\Desktop\\hrsaas\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\陌上花开，可缓缓归归矣\\Desktop\\hrsaas\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\陌上花开，可缓缓归归矣\\Desktop\\hrsaas\\src\\utils\\request.js","dependencies":[{"path":"C:\\Users\\陌上花开，可缓缓归归矣\\Desktop\\hrsaas\\src\\utils\\request.js","mtime":1655186874920},{"path":"C:\\Users\\陌上花开，可缓缓归归矣\\Desktop\\hrsaas\\babel.config.js","mtime":1655089325320},{"path":"C:\\Users\\陌上花开，可缓缓归归矣\\Desktop\\hrsaas\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1655089562873},{"path":"C:\\Users\\陌上花开，可缓缓归归矣\\Desktop\\hrsaas\\node_modules\\babel-loader\\lib\\index.js","mtime":1655089564691},{"path":"C:\\Users\\陌上花开，可缓缓归归矣\\Desktop\\hrsaas\\node_modules\\eslint-loader\\index.js","mtime":1655089563279}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiQzovVXNlcnMvXHU5NjRDXHU0RTBBXHU4MkIxXHU1RjAwXHVGRjBDXHU1M0VGXHU3RjEzXHU3RjEzXHU1RjUyXHU1RjUyXHU3N0UzL0Rlc2t0b3AvaHJzYWFzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9yZWdlbmVyYXRvclJ1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzovVXNlcnMvXHU5NjRDXHU0RTBBXHU4MkIxXHU1RjAwXHVGRjBDXHU1M0VGXHU3RjEzXHU3RjEzXHU1RjUyXHU1RjUyXHU3N0UzL0Rlc2t0b3AvaHJzYWFzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB7IE1lc3NhZ2UgfSBmcm9tICdlbGVtZW50LXVpJzsKaW1wb3J0IHsgZ2V0VGltZVN0YW1wIH0gZnJvbSAnQC91dGlscy9hdXRoJzsKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnOwppbXBvcnQgcm91dGVyIGZyb20gJ0Avcm91dGVyJzsKdmFyIFRpbWVPdXQgPSA1NDAwOyAvLyDlrprkuYnotoXml7bml7bpl7QKCnZhciBzZXJ2aWNlID0gYXhpb3MuY3JlYXRlKHsKICAvLyAgICDorr7nva7ln7rnoYDlnLDlnYAKICAvLyDnjq/looPlj5jph48gbnBtIHJ1biBkZXYgIC9hcGkgICAv55Sf5Lqn546v5aKDIG5wbSBydW4gYnVpbGQgIC9wcm9kLWFwaQogIGJhc2VVUkw6IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9BUEksCiAgdGltZW91dDogMTAwMDAgLy8g6K6k5Li65Y+q6KaB6LaF6L+HNeenkumSn+S4jeWTjeW6lCDlsLHotoXml7YKCn0pOyAvLyDor7fmsYLmi6bmiKrlmagKCnNlcnZpY2UuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlKGNvbmZpZykgewogICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBpZiAoIXN0b3JlLmdldHRlcnMudG9rZW4pIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKCFDaGVja0lzVGltZU91dCgpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ3VzZXIvbGdvdXQnKTsKCiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIHJvdXRlci5wdXNoKCcvbG9naW4nKTsgLy8g6Lez5Yiw55m75b2VCgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ+aCqOeahHRva2Vu5bey57uP5aSx5pWIJykpKTsKCiAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgIC8vIOWmguaenOWtmOWcqHRva2VuCiAgICAgICAgICAgIGNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSAiQmVhcmVyICIuY29uY2F0KHN0b3JlLmdldHRlcnMudG9rZW4pOyAvLyByZXR1cm4gY29uZmlnCgogICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBjb25maWcpOwoKICAgICAgICAgIGNhc2UgODoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiAoX3gpIHsKICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpLCBmdW5jdGlvbiAoZXJyb3IpIHsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsgLy8g5ZON5bqU5oum5oiq5ZmoCgpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgLy8g5oiQ5Yqf5omn6KGMCiAgLy8gYXhpb3Ppu5jorqTliqDkuobkuIDlsYJkYXRh55qE5YyF6KO5CiAgdmFyIF9yZXNwb25zZSRkYXRhID0gcmVzcG9uc2UuZGF0YSwKICAgICAgc3VjY2VzcyA9IF9yZXNwb25zZSRkYXRhLnN1Y2Nlc3MsCiAgICAgIG1lc3NhZ2UgPSBfcmVzcG9uc2UkZGF0YS5tZXNzYWdlLAogICAgICBkYXRhID0gX3Jlc3BvbnNlJGRhdGEuZGF0YTsKCiAgaWYgKHN1Y2Nlc3MpIHsKICAgIC8vIOatpOaXtuiupOS4uuS4muWKoeaJp+ihjOaIkOWKn+S6hgogICAgcmV0dXJuIGRhdGE7IC8vIOi/lOWbnueUqOaIt+aJgOmcgOimgeeahOaVsOaNrgogIH0gZWxzZSB7CiAgICAvLyDlvZPkuJrliqHlpLHotKXnmoTml7blgJkKICAgIE1lc3NhZ2UuZXJyb3IobWVzc2FnZSk7IC8vIOaPkOekuua2iOaBrwoKICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IobWVzc2FnZSkpOwogIH0KfSwgLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICB2YXIgX3JlZjIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKGVycm9yKSB7CiAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBpZiAoIShlcnJvci5yZXNwb25zZSAmJiBlcnJvci5yZXNwb25zZS5kYXRhICYmIGVycm9yLnJlc3BvbnNlLmRhdGEuY29kZSA9PT0gMTAwMDIpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA0OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgndXNlci9sZ291dCcpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgLy8g6LCD55So55m75Ye6YWN0aW9uCiAgICAgICAgICAgIHJvdXRlci5wdXNoKCcvbG9naW4nKTsgLy8g6Lez5Yiw55m75b2V6aG1CgogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAvLyDlpLHotKUKICAgICAgICAgICAgLy8gTWVzc2FnZeetieWQjOS6jiB0aGlzLiRtZXNzYWdlCiAgICAgICAgICAgIE1lc3NhZ2UuZXJyb3IoZXJyb3IubWVzc2FnZSk7IC8vIOaPkOekuumUmeivrwogICAgICAgICAgICAvLyByZWplY3QKCiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBQcm9taXNlLnJlamVjdChlcnJvcikpOwoKICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTIpOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIChfeDIpIHsKICAgIHJldHVybiBfcmVmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKSk7IC8vIOajgOafpXRva2Vu5piv5ZCm6L+H5pyfCgpmdW5jdGlvbiBDaGVja0lzVGltZU91dCgpIHsKICAvLyDlvZPliY3ml7bpl7QgIC0g5a2Y5YKo55qE5pe26Ze05oizID4g5pe25pWI5oCnICBmYWxzZSAgIHRyCiAgcmV0dXJuIChEYXRlLm5vdygpIC0gZ2V0VGltZVN0YW1wKCkpIC8gMTAwMCA+IFRpbWVPdXQ7Cn0KCmV4cG9ydCBkZWZhdWx0IHNlcnZpY2U7"},{"version":3,"names":["axios","Message","getTimeStamp","store","router","TimeOut","service","create","baseURL","process","env","VUE_APP_BASE_API","timeout","interceptors","request","use","config","getters","token","CheckIsTimeOut","dispatch","push","Promise","reject","Error","headers","Authorization","error","response","data","success","message","code","Date","now"],"sources":["C:/Users/陌上花开，可缓缓归归矣/Desktop/hrsaas/src/utils/request.js"],"sourcesContent":["import axios from 'axios'\r\nimport { Message } from 'element-ui'\r\nimport { getTimeStamp } from '@/utils/auth'\r\nimport store from '@/store'\r\nimport router from '@/router'\r\nconst TimeOut = 5400 // 定义超时时间\r\nconst service = axios.create({\r\n//    设置基础地址\r\n// 环境变量 npm run dev  /api   /生产环境 npm run build  /prod-api\r\n  baseURL: process.env.VUE_APP_BASE_API,\r\n  timeout: 10000 // 认为只要超过5秒钟不响应 就超时\r\n})\r\n// 请求拦截器\r\nservice.interceptors.request.use(async config => {\r\n  // 请求接口  config是请求配置\r\n  // 取token\r\n  if (store.getters.token) {\r\n    // 只要有token 就要检查token时效性\r\n    if (CheckIsTimeOut()) {\r\n      //  继续？\r\n      await store.dispatch('user/lgout')\r\n      router.push('/login') // 跳到登录\r\n      return Promise.reject(new Error('您的token已经失效'))\r\n    }\r\n    // 如果存在token\r\n    config.headers.Authorization = `Bearer ${store.getters.token}`\r\n    // return config\r\n  }\r\n  // 这里一定要注意\r\n  // 一定要return config\r\n  return config\r\n}, error => {\r\n  return Promise.reject(error)\r\n})\r\n// 响应拦截器\r\nservice.interceptors.response.use(response => {\r\n  // 成功执行\r\n  // axios默认加了一层data的包裹\r\n  const { success, message, data } = response.data\r\n  if (success) {\r\n    // 此时认为业务执行成功了\r\n    return data // 返回用户所需要的数据\r\n  } else {\r\n    // 当业务失败的时候\r\n    Message.error(message) // 提示消息\r\n    return Promise.reject(new Error(message))\r\n  }\r\n}, async error => {\r\n  // error 有response对象 config\r\n  if (error.response && error.response.data && error.response.data.code === 10002) {\r\n    // 后端告诉前端token超时了\r\n    await store.dispatch('user/lgout') // 调用登出action\r\n    router.push('/login') // 跳到登录页\r\n  }\r\n  // 失败\r\n  // Message等同于 this.$message\r\n  Message.error(error.message) // 提示错误\r\n  // reject\r\n  return Promise.reject(error) // 传入一个错误的对象  就认为promise执行链 进入了catch\r\n})\r\n// 检查token是否过期\r\nfunction CheckIsTimeOut() {\r\n  // 当前时间  - 存储的时间戳 > 时效性  false   tr\r\n  return (Date.now() - getTimeStamp()) / 1000 > TimeOut\r\n}\r\nexport default service\r\n"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,YAAxB;AACA,SAASC,YAAT,QAA6B,cAA7B;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,IAAMC,OAAO,GAAG,IAAhB,C,CAAqB;;AACrB,IAAMC,OAAO,GAAGN,KAAK,CAACO,MAAN,CAAa;EAC7B;EACA;EACEC,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC,gBAHM;EAI3BC,OAAO,EAAE,KAJkB,CAIZ;;AAJY,CAAb,CAAhB,C,CAMA;;AACAN,OAAO,CAACO,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B;EAAA,sEAAiC,iBAAMC,MAAN;IAAA;MAAA;QAAA;UAAA;YAAA,KAG3Bb,KAAK,CAACc,OAAN,CAAcC,KAHa;cAAA;cAAA;YAAA;;YAAA,KAKzBC,cAAc,EALW;cAAA;cAAA;YAAA;;YAAA;YAAA,OAOrBhB,KAAK,CAACiB,QAAN,CAAe,YAAf,CAPqB;;UAAA;YAQ3BhB,MAAM,CAACiB,IAAP,CAAY,QAAZ,EAR2B,CAQL;;YARK,iCASpBC,OAAO,CAACC,MAAR,CAAe,IAAIC,KAAJ,CAAU,aAAV,CAAf,CAToB;;UAAA;YAW7B;YACAR,MAAM,CAACS,OAAP,CAAeC,aAAf,oBAAyCvB,KAAK,CAACc,OAAN,CAAcC,KAAvD,EAZ6B,CAa7B;;UAb6B;YAAA,iCAiBxBF,MAjBwB;;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAAjC;;EAAA;IAAA;EAAA;AAAA,KAkBG,UAAAW,KAAK,EAAI;EACV,OAAOL,OAAO,CAACC,MAAR,CAAeI,KAAf,CAAP;AACD,CApBD,E,CAqBA;;AACArB,OAAO,CAACO,YAAR,CAAqBe,QAArB,CAA8Bb,GAA9B,CAAkC,UAAAa,QAAQ,EAAI;EAC5C;EACA;EACA,qBAAmCA,QAAQ,CAACC,IAA5C;EAAA,IAAQC,OAAR,kBAAQA,OAAR;EAAA,IAAiBC,OAAjB,kBAAiBA,OAAjB;EAAA,IAA0BF,IAA1B,kBAA0BA,IAA1B;;EACA,IAAIC,OAAJ,EAAa;IACX;IACA,OAAOD,IAAP,CAFW,CAEC;EACb,CAHD,MAGO;IACL;IACA5B,OAAO,CAAC0B,KAAR,CAAcI,OAAd,EAFK,CAEkB;;IACvB,OAAOT,OAAO,CAACC,MAAR,CAAe,IAAIC,KAAJ,CAAUO,OAAV,CAAf,CAAP;EACD;AACF,CAZD;EAAA,uEAYG,kBAAMJ,KAAN;IAAA;MAAA;QAAA;UAAA;YAAA,MAEGA,KAAK,CAACC,QAAN,IAAkBD,KAAK,CAACC,QAAN,CAAeC,IAAjC,IAAyCF,KAAK,CAACC,QAAN,CAAeC,IAAf,CAAoBG,IAApB,KAA6B,KAFzE;cAAA;cAAA;YAAA;;YAAA;YAAA,OAIO7B,KAAK,CAACiB,QAAN,CAAe,YAAf,CAJP;;UAAA;YAIoC;YACnChB,MAAM,CAACiB,IAAP,CAAY,QAAZ,EALD,CAKuB;;UALvB;YAOD;YACA;YACApB,OAAO,CAAC0B,KAAR,CAAcA,KAAK,CAACI,OAApB,EATC,CAS4B;YAC7B;;YAVC,kCAWMT,OAAO,CAACC,MAAR,CAAeI,KAAf,CAXN;;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAZH;;EAAA;IAAA;EAAA;AAAA,K,CAyBA;;AACA,SAASR,cAAT,GAA0B;EACxB;EACA,OAAO,CAACc,IAAI,CAACC,GAAL,KAAahC,YAAY,EAA1B,IAAgC,IAAhC,GAAuCG,OAA9C;AACD;;AACD,eAAeC,OAAf"}]}