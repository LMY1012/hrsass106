{"remainingRequest":"C:\\Users\\陌上花开，可缓缓归归矣\\Desktop\\hrsaas\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\陌上花开，可缓缓归归矣\\Desktop\\hrsaas\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\陌上花开，可缓缓归归矣\\Desktop\\hrsaas\\src\\store\\modules\\user.js","dependencies":[{"path":"C:\\Users\\陌上花开，可缓缓归归矣\\Desktop\\hrsaas\\src\\store\\modules\\user.js","mtime":1655261524958},{"path":"C:\\Users\\陌上花开，可缓缓归归矣\\Desktop\\hrsaas\\babel.config.js","mtime":1655089325320},{"path":"C:\\Users\\陌上花开，可缓缓归归矣\\Desktop\\hrsaas\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1655089562873},{"path":"C:\\Users\\陌上花开，可缓缓归归矣\\Desktop\\hrsaas\\node_modules\\babel-loader\\lib\\index.js","mtime":1655089564691},{"path":"C:\\Users\\陌上花开，可缓缓归归矣\\Desktop\\hrsaas\\node_modules\\eslint-loader\\index.js","mtime":1655089563279}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovVXNlcnMvXHU5NjRDXHU0RTBBXHU4MkIxXHU1RjAwXHVGRjBDXHU1M0VGXHU3RjEzXHU3RjEzXHU1RjUyXHU1RjUyXHU3N0UzL0Rlc2t0b3AvaHJzYWFzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyLmpzIjsKaW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiQzovVXNlcnMvXHU5NjRDXHU0RTBBXHU4MkIxXHU1RjAwXHVGRjBDXHU1M0VGXHU3RjEzXHU3RjEzXHU1RjUyXHU1RjUyXHU3N0UzL0Rlc2t0b3AvaHJzYWFzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9yZWdlbmVyYXRvclJ1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzovVXNlcnMvXHU5NjRDXHU0RTBBXHU4MkIxXHU1RjAwXHVGRjBDXHU1M0VGXHU3RjEzXHU3RjEzXHU1RjUyXHU1RjUyXHU3N0UzL0Rlc2t0b3AvaHJzYWFzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0IHsgZ2V0VG9rZW4sIHNldFRva2VuIGFzIF9zZXRUb2tlbiwgcmVtb3ZlVG9rZW4gYXMgX3JlbW92ZVRva2VuLCBzZXRUaW1lU3RhbXAgfSBmcm9tICdAL3V0aWxzL2F1dGgnOwppbXBvcnQgeyBsb2dpbiBhcyBfbG9naW4sIGdldFVzZXJJbmZvIGFzIF9nZXRVc2VySW5mbywgZ2V0VXNlckRldGFpbEJ5SWQgfSBmcm9tICdAL2FwaS91c2VyJzsKaW1wb3J0IHsgcmVzZXRSb3V0ZXIgfSBmcm9tICdAL3JvdXRlcic7CnZhciBzdGF0ZSA9IHsKICB0b2tlbjogZ2V0VG9rZW4oKSwKICAvLyDorr7nva50b2tlbuS4uuWFseS6qwogIHVzZXJJbmZvOiB7fSAvLyDov5nph4zkuLrku4DkuYjkuI3lhpludWxsID8KCn07CnZhciBtdXRhdGlvbnMgPSB7CiAgLy8g6K6+572udG9rZW7nmoRtdXRhdGlvbnMKICBzZXRUb2tlbjogZnVuY3Rpb24gc2V0VG9rZW4oc3RhdGUsIHRva2VuKSB7CiAgICBzdGF0ZS50b2tlbiA9IHRva2VuOyAvLyDlj6rmmK/orr7nva7kuoZ2dWV45Lit55qE5pWw5o2uCiAgICAvLyDpnIDopoHlsIZ2dWV45Lit55qE5pWw5o2u5ZCM5q2l5Yiw57yT5a2YCgogICAgX3NldFRva2VuKHRva2VuKTsKICB9LAogIHJlbW92ZVRva2VuOiBmdW5jdGlvbiByZW1vdmVUb2tlbihzdGF0ZSkgewogICAgc3RhdGUudG9rZW4gPSBudWxsOyAvLyDorr7nva52dWV45Lit55qEdG9rZW7kuLpudWxsCgogICAgX3JlbW92ZVRva2VuKCk7IC8vIOWQjOatpeWIoOmZpOe8k+WtmOS4reeahHRva2VuCgogIH0sCiAgc2V0VXNlckluZm86IGZ1bmN0aW9uIHNldFVzZXJJbmZvKHN0YXRlLCB1c2VySW5mbykgewogICAgc3RhdGUudXNlckluZm8gPSB1c2VySW5mbzsgLy8gc3RhdGUudXNlckluZm8gPSB7IC4uLnVzZXJJbmZvIH0gLy8g5rWF5ou36LSdIOWmguaenOimgeWOu+aUueWxnuaAp+mHjOmdoueahOafkOS4gOS4quWAvCDlj6/ku6XnlKjmtYXmi7fotJ3nmoTmlrnlvI8KICB9LAogIHJlbW92ZVVzZXJJbmZvOiBmdW5jdGlvbiByZW1vdmVVc2VySW5mbyhzdGF0ZSkgewogICAgc3RhdGUudXNlckluZm8gPSB7fTsgLy8g6YeN572u5Li656m65a+56LGhCiAgfQp9Owp2YXIgYWN0aW9ucyA9IHsKICAvLyDlsIHoo4XkuIDkuKrnmbvlvZXnmoRhY3Rpb24KICAvLyBkYXRh6K6k5Li65pivIHsgbW9iaWxlLHBhc3N3b3JkIH0KICAvLyDlj6ropoHnlKhhc3luY+agh+iusOS6huWHveaVsCDpgqPkuYjov5nkuKrlh73mlbDmnKzouqvlsLHmmK9wcm9taXNl5a+56LGhCiAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKGNvbnRleHQsIGRhdGEpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciByZXN1bHQ7CiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gX2xvZ2luKGRhdGEpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgLy8gcmVzdWx05bCx5pivdG9rZW4KICAgICAgICAgICAgICBjb250ZXh0LmNvbW1pdCgnc2V0VG9rZW4nLCByZXN1bHQpOwogICAgICAgICAgICAgIHNldFRpbWVTdGFtcCgpOyAvLyDorr7nva7ml7bpl7TmiLMKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkoKTsKICB9LAogIC8vIOiOt+WPlueUqOaIt+i1hOaWmQogIGdldFVzZXJJbmZvOiBmdW5jdGlvbiBnZXRVc2VySW5mbyhjb250ZXh0KSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgdmFyIHJlc3VsdCwgYmFzZUluZm87CiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiBfZ2V0VXNlckluZm8oKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDU7CiAgICAgICAgICAgICAgcmV0dXJuIGdldFVzZXJEZXRhaWxCeUlkKHJlc3VsdC51c2VySWQpOwoKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGJhc2VJbmZvID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgLy8g55So5oi355qE5Z+65pys5L+h5oGvCiAgICAgICAgICAgICAgY29udGV4dC5jb21taXQoJ3NldFVzZXJJbmZvJywgX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCByZXN1bHQpLCBiYXNlSW5mbykpOyAvLyDkv67mlLlzdGF0ZeS4reeahOeUqOaIt+i1hOaWmQoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgcmVzdWx0KTsKCiAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyKTsKICAgIH0pKSgpOwogIH0sCiAgLy8g55m75Ye6YWN0aW9uCiAgbGdvdXQ6IGZ1bmN0aW9uIGxnb3V0KF9yZWYpIHsKICAgIHZhciBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgIC8vIOWIoOmZpHRva2VuCiAgICBjb21taXQoJ3JlbW92ZVRva2VuJyk7IC8vIOWIoOmZpOeUqOaIt+i1hOaWmQoKICAgIGNvbW1pdCgncmVtb3ZlVXNlckluZm8nKTsgLy8g6YeN572u6Lev55SxCgogICAgcmVzZXRSb3V0ZXIoKTsgLy8g5riF56m66Lev55Sx5qih5Z2X5LiL55qE6Lev55Sx5L+h5oGvCiAgICAvLyBWdWV45a2Q5qih5Z2XIOiwg+eUqOWtkOaooeWdl+eahG11dGF0aW9uCgogICAgY29tbWl0KCdwZXJtaXNzaW9uL3NldFJvdXRlcycsIFtdLCB7CiAgICAgIHJvb3Q6IHRydWUKICAgIH0pOyAvLyBjb21taXTpu5jorqTmmK/mj5DkuqTnmoTlvZPliY3lrZDmqKHlnZfnmoRtdXRhdGlvbnMKICAgIC8vIOWmguaenOWKoOS4iiByb290OiB0cnVlIOWwseihqOekumNvbW1pdOatpOaXtuaYr+aguee6p+eahGNvbW1pdAogICAgLy8gdGhpcy4kc3RvcmUuY29tbWl0KCdwZXJtaXNzaW9uL3NldFJvdXRlcycpCiAgfQp9OwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogc3RhdGUsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMsCiAgYWN0aW9uczogYWN0aW9ucwp9Ow=="},{"version":3,"names":["getToken","setToken","removeToken","setTimeStamp","login","getUserInfo","getUserDetailById","resetRouter","state","token","userInfo","mutations","setUserInfo","removeUserInfo","actions","context","data","result","commit","userId","baseInfo","lgout","root","namespaced"],"sources":["C:/Users/陌上花开，可缓缓归归矣/Desktop/hrsaas/src/store/modules/user.js"],"sourcesContent":["import { getToken, setToken, removeToken, setTimeStamp } from '@/utils/auth'\r\nimport { login, getUserInfo, getUserDetailById } from '@/api/user'\r\nimport { resetRouter } from '@/router'\r\nconst state = {\r\n  token: getToken(), // 设置token为共享\r\n  userInfo: {} // 这里为什么不写null ?\r\n}\r\nconst mutations = {\r\n  // 设置token的mutations\r\n  setToken(state, token) {\r\n    state.token = token // 只是设置了vuex中的数据\r\n    // 需要将vuex中的数据同步到缓存\r\n    setToken(token)\r\n  },\r\n  removeToken(state) {\r\n    state.token = null // 设置vuex中的token为null\r\n    removeToken() // 同步删除缓存中的token\r\n  },\r\n  setUserInfo(state, userInfo) {\r\n    state.userInfo = userInfo\r\n    // state.userInfo = { ...userInfo } // 浅拷贝 如果要去改属性里面的某一个值 可以用浅拷贝的方式\r\n  },\r\n  removeUserInfo(state) {\r\n    state.userInfo = {} // 重置为空对象\r\n  }\r\n}\r\nconst actions = {\r\n  // 封装一个登录的action\r\n  // data认为是 { mobile,password }\r\n  // 只要用async标记了函数 那么这个函数本身就是promise对象\r\n  async login(context, data) {\r\n    // 调用登录接口\r\n    // login(data).then(result => {\r\n\r\n    // })\r\n    // await下方永远都是 reslove成功执行的逻辑\r\n    const result = await login(data)\r\n    // result就是token\r\n    context.commit('setToken', result)\r\n\r\n    setTimeStamp() // 设置时间戳\r\n  },\r\n  // 获取用户资料\r\n  async getUserInfo(context) {\r\n    const result = await getUserInfo()\r\n    // 此时result里面已经有userId\r\n    const baseInfo = await getUserDetailById(result.userId) // 用户的基本信息\r\n    context.commit('setUserInfo', { ...result, ...baseInfo }) // 修改state中的用户资料\r\n    return result // 这里这句话 是伏笔 当下是用不上的 但是后期会用上 敬请期待\r\n  },\r\n  // 登出action\r\n  lgout({ commit }) {\r\n    // 删除token\r\n    commit('removeToken')\r\n    // 删除用户资料\r\n    commit('removeUserInfo')\r\n    // 重置路由\r\n    resetRouter()\r\n    // 清空路由模块下的路由信息\r\n    // Vuex子模块 调用子模块的mutation\r\n    commit('permission/setRoutes', [], { root: true }) // commit默认是提交的当前子模块的mutations\r\n    // 如果加上 root: true 就表示commit此时是根级的commit\r\n    // this.$store.commit('permission/setRoutes')\r\n  }\r\n}\r\nexport default {\r\n  namespaced: true,\r\n  state,\r\n  mutations,\r\n  actions\r\n}\r\n\r\n"],"mappings":";;;AAAA,SAASA,QAAT,EAAmBC,QAAQ,IAARA,SAAnB,EAA6BC,WAAW,IAAXA,YAA7B,EAA0CC,YAA1C,QAA8D,cAA9D;AACA,SAASC,KAAK,IAALA,MAAT,EAAgBC,WAAW,IAAXA,YAAhB,EAA6BC,iBAA7B,QAAsD,YAAtD;AACA,SAASC,WAAT,QAA4B,UAA5B;AACA,IAAMC,KAAK,GAAG;EACZC,KAAK,EAAET,QAAQ,EADH;EACO;EACnBU,QAAQ,EAAE,EAFE,CAEC;;AAFD,CAAd;AAIA,IAAMC,SAAS,GAAG;EAChB;EACAV,QAFgB,oBAEPO,KAFO,EAEAC,KAFA,EAEO;IACrBD,KAAK,CAACC,KAAN,GAAcA,KAAd,CADqB,CACD;IACpB;;IACAR,SAAQ,CAACQ,KAAD,CAAR;EACD,CANe;EAOhBP,WAPgB,uBAOJM,KAPI,EAOG;IACjBA,KAAK,CAACC,KAAN,GAAc,IAAd,CADiB,CACE;;IACnBP,YAAW,GAFM,CAEH;;EACf,CAVe;EAWhBU,WAXgB,uBAWJJ,KAXI,EAWGE,QAXH,EAWa;IAC3BF,KAAK,CAACE,QAAN,GAAiBA,QAAjB,CAD2B,CAE3B;EACD,CAde;EAehBG,cAfgB,0BAeDL,KAfC,EAeM;IACpBA,KAAK,CAACE,QAAN,GAAiB,EAAjB,CADoB,CACA;EACrB;AAjBe,CAAlB;AAmBA,IAAMI,OAAO,GAAG;EACd;EACA;EACA;EACMV,KAJQ,iBAIFW,OAJE,EAIOC,IAJP,EAIa;IAAA;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;cAAA,OAMJZ,MAAK,CAACY,IAAD,CAND;;YAAA;cAMnBC,MANmB;cAOzB;cACAF,OAAO,CAACG,MAAR,CAAe,UAAf,EAA2BD,MAA3B;cAEAd,YAAY,GAVa,CAUV;;YAVU;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EAW1B,CAfa;EAgBd;EACME,WAjBQ,uBAiBIU,OAjBJ,EAiBa;IAAA;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;cAAA,OACJV,YAAW,EADP;;YAAA;cACnBY,MADmB;cAAA;cAAA,OAGFX,iBAAiB,CAACW,MAAM,CAACE,MAAR,CAHf;;YAAA;cAGnBC,QAHmB;cAG+B;cACxDL,OAAO,CAACG,MAAR,CAAe,aAAf,kCAAmCD,MAAnC,GAA8CG,QAA9C,GAJyB,CAIiC;;cAJjC,kCAKlBH,MALkB;;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EAM1B,CAvBa;EAwBd;EACAI,KAzBc,uBAyBI;IAAA,IAAVH,MAAU,QAAVA,MAAU;IAChB;IACAA,MAAM,CAAC,aAAD,CAAN,CAFgB,CAGhB;;IACAA,MAAM,CAAC,gBAAD,CAAN,CAJgB,CAKhB;;IACAX,WAAW,GANK,CAOhB;IACA;;IACAW,MAAM,CAAC,sBAAD,EAAyB,EAAzB,EAA6B;MAAEI,IAAI,EAAE;IAAR,CAA7B,CAAN,CATgB,CASmC;IACnD;IACA;EACD;AArCa,CAAhB;AAuCA,eAAe;EACbC,UAAU,EAAE,IADC;EAEbf,KAAK,EAALA,KAFa;EAGbG,SAAS,EAATA,SAHa;EAIbG,OAAO,EAAPA;AAJa,CAAf"}]}