{"remainingRequest":"C:\\Users\\陌上花开，可缓缓归归矣\\Desktop\\hrsaas\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\陌上花开，可缓缓归归矣\\Desktop\\hrsaas\\src\\views\\employees\\components\\add-employee.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\陌上花开，可缓缓归归矣\\Desktop\\hrsaas\\src\\views\\employees\\components\\add-employee.vue","mtime":1656381561213},{"path":"C:\\Users\\陌上花开，可缓缓归归矣\\Desktop\\hrsaas\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1655089562873},{"path":"C:\\Users\\陌上花开，可缓缓归归矣\\Desktop\\hrsaas\\node_modules\\babel-loader\\lib\\index.js","mtime":1655089564691},{"path":"C:\\Users\\陌上花开，可缓缓归归矣\\Desktop\\hrsaas\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1655089562873},{"path":"C:\\Users\\陌上花开，可缓缓归归矣\\Desktop\\hrsaas\\node_modules\\vue-loader\\lib\\index.js","mtime":1655089565085}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgRW1wbG95ZWVFbnVtIGZyb20gJ0AvYXBpL2NvbnN0YW50L2VtcGxveWVlcycNCmltcG9ydCB7IGdldERlcGFydG1lbnRzIH0gZnJvbSAnQC9hcGkvZGVwYXJ0bWVudHMnDQppbXBvcnQgeyB0cmFuc0xpc3RUb1RyZWVEYXRhIH0gZnJvbSAnQC91dGlscycNCmltcG9ydCB7IGFkZEVtcGxveWVlIH0gZnJvbSAnQC9hcGkvZW1wbG95ZWVzJw0KZXhwb3J0IGRlZmF1bHQgew0KICBwcm9wczogew0KICAgIHNob3dEaWFsb2c6IHsNCiAgICAgIHR5cGU6IEJvb2xlYW4sDQogICAgICBkZWZhdWx0OiBmYWxzZQ0KICAgIH0NCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgRW1wbG95ZWVFbnVtLCAvLyDlnKhkYXRh5Lit5a6a5LmJ5pWw5o2uDQogICAgICAvLyDooajljZXmlbDmja4NCiAgICAgIHRyZWVEYXRhOiBbXSwgLy8g5a6a5LmJ5pWw57uE5o6l5pS25qCR5b2i5pWw5o2uDQogICAgICBzaG93VHJlZTogZmFsc2UsIC8vIOaOp+WItuagkeW9oueahOaYvuekuuaIluiAhemakOiXjw0KICAgICAgbG9hZGluZzogZmFsc2UsIC8vIOaOp+WItuagkeeahOaYvuekuuaIluiAhemakOiXj+i/m+W6puadoQ0KICAgICAgZm9ybURhdGE6IHsNCiAgICAgICAgdXNlcm5hbWU6ICcnLA0KICAgICAgICBtb2JpbGU6ICcnLA0KICAgICAgICBmb3JtT2ZFbXBsb3ltZW50OiAnJywNCiAgICAgICAgd29ya051bWJlcjogJycsDQogICAgICAgIGRlcGFydG1lbnROYW1lOiAnJywNCiAgICAgICAgdGltZU9mRW50cnk6ICcnLA0KICAgICAgICBjb3JyZWN0aW9uVGltZTogJycNCiAgICAgIH0sDQogICAgICBydWxlczogew0KICAgICAgICB1c2VybmFtZTogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfnlKjmiLflp5PlkI3kuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgICB7IG1pbjogMSwgbWF4OiA0LCBtZXNzYWdlOiAn55So5oi35aeT5ZCN5Li6MS005L2NJyB9XSwNCiAgICAgICAgbW9iaWxlOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+aJi+acuuWPt+S4jeiDveS4uuepuicsIHRyaWdnZXI6ICdibHVyJyB9LCB7DQogICAgICAgICAgcGF0dGVybjogL14xWzMtOV1cZHs5fSQvLCBtZXNzYWdlOiAn5omL5py65Y+35qC85byP5LiN5q2j56GuJywgdHJpZ2dlcjogJ2JsdXInDQogICAgICAgIH1dLA0KICAgICAgICBmb3JtT2ZFbXBsb3ltZW50OiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+iBmOeUqOW9ouW8j+S4jeiDveS4uuepuicsIHRyaWdnZXI6ICdibHVyJyB9XSwNCiAgICAgICAgd29ya051bWJlcjogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICflt6Xlj7fkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnYmx1cicgfV0sDQogICAgICAgIGRlcGFydG1lbnROYW1lOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+mDqOmXqOS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdjaGFuZ2UnIH1dLA0KICAgICAgICB0aW1lT2ZFbnRyeTogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICflhaXogYzml7bpl7QnLCB0cmlnZ2VyOiAnYmx1cicgfV0NCg0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGFzeW5jIGdldERlcGFydG1lbnRzKCkgew0KICAgICAgdGhpcy5zaG93VHJlZSA9IHRydWUNCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWUNCiAgICAgIGNvbnN0IHsgZGVwdHMgfSA9IGF3YWl0IGdldERlcGFydG1lbnRzKCkNCiAgICAgIC8vIGRlcHRz5piv5pWw57uEIOS9huS4jeaYr+agkeW9og0KICAgICAgdGhpcy50cmVlRGF0YSA9IHRyYW5zTGlzdFRvVHJlZURhdGEoZGVwdHMsICcnKQ0KICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UNCiAgICB9LA0KICAgIHNlbGVjdE5vZGUobm9kZSkgew0KICAgICAgdGhpcy5mb3JtRGF0YS5kZXBhcnRtZW50TmFtZSA9IG5vZGUubmFtZQ0KICAgICAgdGhpcy5zaG93VHJlZSA9IGZhbHNlDQogICAgfSwNCiAgICBidG5DYW5jZWwoKSB7DQogICAgLy8g6YeN572u5Y6f5p2l55qE5pWw5o2uDQogICAgICB0aGlzLmZvcm1EYXRhID0gew0KICAgICAgICB1c2VybmFtZTogJycsDQogICAgICAgIG1vYmlsZTogJycsDQogICAgICAgIGZvcm1PZkVtcGxveW1lbnQ6ICcnLA0KICAgICAgICB3b3JrTnVtYmVyOiAnJywNCiAgICAgICAgZGVwYXJ0bWVudE5hbWU6ICcnLA0KICAgICAgICB0aW1lT2ZFbnRyeTogJycsDQogICAgICAgIGNvcnJlY3Rpb25UaW1lOiAnJw0KICAgICAgfQ0KICAgICAgLy8g5riF6Zmk5qCh6aqMDQogICAgICB0aGlzLiRyZWZzLmFkZEVtcGxveWVlLnJlc2V0RmllbGRzKCkNCiAgICAgIC8vICAg5YWz6Zet5by55bGCDQogICAgICAvLyAgIHVwZGF0ZTpwcm9wc+WQjeensCDov5nmoLflhpnlj6/ku6Xnm7TmjqXnlKhzeW5j5L+u6aWw56ym5aSE55CGDQogICAgICB0aGlzLiRlbWl0KCd1cGRhdGU6c2hvd0RpYWxvZycsIGZhbHNlKQ0KICAgIH0sDQogICAgYXN5bmMgYnRuT0soKSB7DQogICAgICB0cnkgew0KICAgICAgICBhd2FpdCB0aGlzLiRyZWZzLmFkZEVtcGxveWVlLnZhbGlkYXRlKCkNCiAgICAgICAgLy8gICAg6LCD55So5paw5aKe5o6l5Y+jDQogICAgICAgIGF3YWl0IGFkZEVtcGxveWVlKHRoaXMuZm9ybURhdGEpDQogICAgICAgIC8vIOWRiuivieeItue7hOS7tuabtOaWsOaVsOaNrg0KICAgICAgICAvLyB0aGlzLiRwYXJlbnQg5Y+v5Lul55u05o6l6LCD55So5Yiw54i257uE5Lu255qE5a6e5L6LIOWunumZheS4iuWwseaYr+eItue7hOS7tnRoaXMNCiAgICAgICAgLy8gdGhpcy4kZW1pdA0KICAgICAgICB0aGlzLiRwYXJlbnQuZ2V0RW1wbG95ZWVMaXN0KCkNCiAgICAgICAgdGhpcy4kcGFyZW50LnNob3dEaWFsb2cgPSBmYWxzZQ0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpDQogICAgICB9DQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["add-employee.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"add-employee.vue","sourceRoot":"src/views/employees/components","sourcesContent":["<template>\r\n  <!-- sync修饰符 -->\r\n  <!--props变量在当前的组件的作用域中是只读的\r\n      sync修饰符作用的属性 后面的变量不能是props变量-->\r\n  <el-dialog title=\"新增员工\" :visible=\"showDialog\" @close=\"btnCancel\">\r\n    <!-- 放置内容 -->\r\n    <el-form ref=\"addEmployee\" :model=\"formData\" :rules=\"rules\" label-width=\"120px\">\r\n      <el-form-item label=\"姓名\" prop=\"username\">\r\n        <el-input v-model=\"formData.username\" class=\"wp50\" placeholder=\"请输入姓名\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"手机号\" prop=\"mobile\">\r\n        <el-input v-model=\"formData.mobile\" class=\"wp50\" placeholder=\"请输入手机号\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"入职时间\" prop=\"timeOfEntry\">\r\n        <el-date-picker v-model=\"formData.timeOfEntry\" class=\"wp50\" placeholder=\"请选择入职时间\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"聘用形式\" prop=\"formOfEmployment\">\r\n        <el-select v-model=\"formData.formOfEmployment\" class=\"wp50\" placeholder=\"请选择聘用形式\">\r\n          <el-option v-for=\"item in EmployeeEnum.hireType\" :key=\"item.id\" :label=\"item.value\" :value=\"item.id\" />\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"工号\" prop=\"workNumber\">\r\n        <el-input v-model=\"formData.workNumber\" class=\"wp50\" placeholder=\"请输入工号\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"部门\" prop=\"departmentName\">\r\n        <el-input v-model=\"formData.departmentName\" class=\"wp50\" placeholder=\"请选择部门\" @focus=\"getDepartments\" />\r\n        <!-- 放置一个树形组件 el-tree默认显示的字段 label 默认找节点的字段是children-->\r\n        <!-- props -->\r\n        <el-tree\r\n          v-if=\"showTree\"\r\n          v-loading=\"loading\"\r\n          :data=\"treeData\"\r\n          default-expand-all=\"\"\r\n          :props=\"{ label: 'name' }\"\r\n          @node-click=\"selectNode\"\r\n        />\r\n      </el-form-item>\r\n      <el-form-item label=\"转正时间\" prop=\"correctionTime\">\r\n        <el-date-picker v-model=\"formData.correctionTime\" class=\"wp50\" placeholder=\"请选择转正时间\" />\r\n      </el-form-item>\r\n    </el-form>\r\n    <!-- footer插槽 -->\r\n    <template v-slot:footer>\r\n      <el-row type=\"flex\" justify=\"center\">\r\n        <el-col :span=\"6\">\r\n          <el-button size=\"small\" @click=\"btnCancel\">取消</el-button>\r\n          <el-button type=\"primary\" size=\"small\" @click=\"btnOK\">确定</el-button>\r\n        </el-col>\r\n      </el-row>\r\n    </template>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport EmployeeEnum from '@/api/constant/employees'\r\nimport { getDepartments } from '@/api/departments'\r\nimport { transListToTreeData } from '@/utils'\r\nimport { addEmployee } from '@/api/employees'\r\nexport default {\r\n  props: {\r\n    showDialog: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      EmployeeEnum, // 在data中定义数据\r\n      // 表单数据\r\n      treeData: [], // 定义数组接收树形数据\r\n      showTree: false, // 控制树形的显示或者隐藏\r\n      loading: false, // 控制树的显示或者隐藏进度条\r\n      formData: {\r\n        username: '',\r\n        mobile: '',\r\n        formOfEmployment: '',\r\n        workNumber: '',\r\n        departmentName: '',\r\n        timeOfEntry: '',\r\n        correctionTime: ''\r\n      },\r\n      rules: {\r\n        username: [{ required: true, message: '用户姓名不能为空', trigger: 'blur' },\r\n          { min: 1, max: 4, message: '用户姓名为1-4位' }],\r\n        mobile: [{ required: true, message: '手机号不能为空', trigger: 'blur' }, {\r\n          pattern: /^1[3-9]\\d{9}$/, message: '手机号格式不正确', trigger: 'blur'\r\n        }],\r\n        formOfEmployment: [{ required: true, message: '聘用形式不能为空', trigger: 'blur' }],\r\n        workNumber: [{ required: true, message: '工号不能为空', trigger: 'blur' }],\r\n        departmentName: [{ required: true, message: '部门不能为空', trigger: 'change' }],\r\n        timeOfEntry: [{ required: true, message: '入职时间', trigger: 'blur' }]\r\n\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    async getDepartments() {\r\n      this.showTree = true\r\n      this.loading = true\r\n      const { depts } = await getDepartments()\r\n      // depts是数组 但不是树形\r\n      this.treeData = transListToTreeData(depts, '')\r\n      this.loading = false\r\n    },\r\n    selectNode(node) {\r\n      this.formData.departmentName = node.name\r\n      this.showTree = false\r\n    },\r\n    btnCancel() {\r\n    // 重置原来的数据\r\n      this.formData = {\r\n        username: '',\r\n        mobile: '',\r\n        formOfEmployment: '',\r\n        workNumber: '',\r\n        departmentName: '',\r\n        timeOfEntry: '',\r\n        correctionTime: ''\r\n      }\r\n      // 清除校验\r\n      this.$refs.addEmployee.resetFields()\r\n      //   关闭弹层\r\n      //   update:props名称 这样写可以直接用sync修饰符处理\r\n      this.$emit('update:showDialog', false)\r\n    },\r\n    async btnOK() {\r\n      try {\r\n        await this.$refs.addEmployee.validate()\r\n        //    调用新增接口\r\n        await addEmployee(this.formData)\r\n        // 告诉父组件更新数据\r\n        // this.$parent 可以直接调用到父组件的实例 实际上就是父组件this\r\n        // this.$emit\r\n        this.$parent.getEmployeeList()\r\n        this.$parent.showDialog = false\r\n      } catch (error) {\r\n        console.log(error)\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n"]}]}