{"remainingRequest":"C:\\Users\\陌上花开，可缓缓归归矣\\Desktop\\hrsaas\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\陌上花开，可缓缓归归矣\\Desktop\\hrsaas\\src\\views\\setting\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\陌上花开，可缓缓归归矣\\Desktop\\hrsaas\\src\\views\\setting\\index.vue","mtime":1656317310811},{"path":"C:\\Users\\陌上花开，可缓缓归归矣\\Desktop\\hrsaas\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1655089562873},{"path":"C:\\Users\\陌上花开，可缓缓归归矣\\Desktop\\hrsaas\\node_modules\\babel-loader\\lib\\index.js","mtime":1655089564691},{"path":"C:\\Users\\陌上花开，可缓缓归归矣\\Desktop\\hrsaas\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1655089562873},{"path":"C:\\Users\\陌上花开，可缓缓归归矣\\Desktop\\hrsaas\\node_modules\\vue-loader\\lib\\index.js","mtime":1655089565085}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBnZXRSb2xlTGlzdCwgZ2V0Q29tcGFueUluZm8sIGRlbGV0ZVJvbGUsIHVwZGF0ZVJvbGUsIGdldFJvbGVEZXRhaWwsIGFkZFJvbGUgfSBmcm9tICdAL2FwaS9zZXR0aW5nJw0KaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIC8vIOaJv+aOpeaVsOe7hA0KICAgICAgbGlzdDogW10sDQogICAgICAvLyDpobXnoIHmlbANCiAgICAgIHBhZ2U6IHsNCiAgICAgICAgLy8g5b2T5YmN6aG156CBDQogICAgICAgIHBhZ2U6IDEsDQogICAgICAgIC8vIOavj+mhteeahOS4quaVsA0KICAgICAgICBwYWdlc2l6ZTogMTAsDQogICAgICAgIC8vIOiusOW9leaAu+aVsA0KICAgICAgICB0b3RhbDogMA0KICAgICAgfSwNCiAgICAgIC8vIOaJv+aOpeWFrOWPuOS/oeaBrw0KICAgICAgZm9ybURhdGE6IHsNCiAgICAgICAgLy8g5YWs5Y+45L+h5oGvDQogICAgICB9LA0KICAgICAgc2hvd0RpYWxvZzogZmFsc2UsDQogICAgICAvLyDmjqXlj5fooajljZXmlbDmja4NCiAgICAgIHJvbGVGb3JtOiB7fSwNCiAgICAgIHJ1bGVzOiB7DQogICAgICAgIG5hbWU6IFt7IHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgIG1lc3NhZ2U6ICfop5LoibLlkI3np7DkuI3og73kuLrnqbonLA0KICAgICAgICAgIHRyaWdnZXI6ICdibHVyJyB9XQ0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmdldFJvbGVMaXN0KCkgLy8g6I635Y+W6KeS6Imy5YiX6KGoDQogICAgdGhpcy5nZXRDb21wYW55SW5mbygpIC8vIOiOt+WPluWFrOWPuOS/oeaBrw0KICB9LA0KICAvLyDov5vooYznu5PmnoTvvIzojrflj5Zjb21wYW55SWQNCiAgY29tcHV0ZWQ6IHsNCiAgICAuLi5tYXBHZXR0ZXJzKFsnY29tcGFueUlkJ10pLA0KICAgIHNob3dUaXRsZSgpIHsNCiAgICAgIHJldHVybiB0aGlzLnJvbGVGb3JtLmlkID8gJ+e8lui+keinkuiJsicgOiAn5paw5aKe6KeS6ImyJw0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIC8vIOiOt+WPluWRmOW3peWIl+ihqA0KICAgIGFzeW5jIGdldFJvbGVMaXN0KCkgew0KICAgICAgLy8g6I635Y+W5pWw5o2uDQogICAgICBjb25zdCB7IHRvdGFsLCByb3dzIH0gPSBhd2FpdCBnZXRSb2xlTGlzdCh0aGlzLnBhZ2UpDQogICAgICB0aGlzLnBhZ2UudG90YWwgPSB0b3RhbA0KICAgICAgdGhpcy5saXN0ID0gcm93cw0KICAgIH0sDQogICAgLy8g54K55Ye75pu05o2i6aG156CBDQogICAgY2hhbmdlUGFnZShOZXdQYWdlKSB7DQogICAgICAvLyBuZXdQYWdl5piv5b2T5YmN54K55Ye755qE6aG156CBDQogICAgICAvLyDlsIblvZPliY3pobXnoIHotYvlgLznu5nlvZPliY3nmoTmnIDmlrDpobXnoIENCiAgICAgIHRoaXMucGFnZS5wYWdlID0gTmV3UGFnZQ0KICAgICAgdGhpcy5nZXRSb2xlTGlzdCgpDQogICAgfSwNCiAgICAvLyDojrflj5blhazlj7jkv6Hmga8NCiAgICBhc3luYyBnZXRDb21wYW55SW5mbygpIHsNCiAgICAgIC8vIOaKiuiOt+WPlueahOS/oeaBr++8jOeUqGZvcm1EYXRh5om/5o6lDQogICAgICB0aGlzLmZvcm1EYXRhID0gYXdhaXQgZ2V0Q29tcGFueUluZm8odGhpcy5nZXRDb21wYW55SW5mbykNCiAgICB9LA0KICAgIC8vIOWIoOmZpOWRmOW3peS/oeaBrw0KICAgIGFzeW5jIGRlbGV0ZVJvbGUoaWQpIHsNCiAgICAgIHRyeSB7DQogICAgICAgIGF3YWl0IHRoaXMuJGNvbmZpcm0oJ+ehruiupOWIoOmZpOivpeinkuiJsuWQlycpDQogICAgICAgIC8vIOWPquacieeCueWHu+S6huehruWumiDmiY3og73ov5vlhaXliLDkuIvmlrkNCiAgICAgICAgYXdhaXQgZGVsZXRlUm9sZShpZCkgLy8g6LCD55So5Yig6Zmk5o6l5Y+jDQogICAgICAgIHRoaXMuZ2V0Um9sZUxpc3QoKSAvLyDph43mlrDliqDovb3mlbDmja4NCiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfliKDpmaTop5LoibLmiJDlip8nKQ0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpDQogICAgICB9DQogICAgfSwNCiAgICAvLyDnvJbovpHlkZjlt6Xkv6Hmga8NCiAgICBhc3luYyBlZGl0Um9sZShpZCkgew0KICAgICAgdGhpcy5yb2xlRm9ybSA9IGF3YWl0IGdldFJvbGVEZXRhaWwoaWQpDQogICAgICB0aGlzLnNob3dEaWFsb2cgPSB0cnVlDQogICAgfSwNCiAgICAvLyDngrnlh7vmiJDlip8NCiAgICBhc3luYyBidG5PSygpIHsNCiAgICAgIGF3YWl0IHRoaXMuJHJlZnMucm9sZUZvcm0udmFsaWRhdGUoKQ0KICAgICAgLy8g5Y+q5pyJ5qCh6aqM6YCa6L+H55qE5oOF5Ya15LiLIOaJjeS8muaJp+ihjGF3YWl055qE5LiL5pa55YaF5a65DQogICAgICAvLyByb2xlRm9ybei/meS4quWvueixoeaciWlk5bCx5piv57yW6L6RIOayoeaciWlk5bCx5piv5paw5aKeDQogICAgICBpZiAodGhpcy5yb2xlRm9ybS5pZCkgew0KICAgICAgICBhd2FpdCB1cGRhdGVSb2xlKHRoaXMucm9sZUZvcm0pDQogICAgICB9IGVsc2Ugew0KICAgICAgICAvLyDmlrDlop7kuJrliqENCiAgICAgICAgYXdhaXQgYWRkUm9sZSh0aGlzLnJvbGVGb3JtKQ0KICAgICAgfQ0KICAgICAgLy8g6YeN5paw5ouJ5Y+W5pWw5o2uDQogICAgICB0aGlzLmdldFJvbGVMaXN0KCkNCiAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5pON5L2c5oiQ5YqfJykNCiAgICAgIC8vIOinpuWPkeWFs+mXreS6i+S7tg0KICAgICAgdGhpcy5zaG93RGlhbG9nID0gZmFsc2UNCiAgICB9LA0KICAgIGJ0bkNhbmNlbCgpIHsNCiAgICAgIHRoaXMucm9sZUZvcm0gPSB7DQogICAgICAgIG5hbWU6ICcnLA0KICAgICAgICBkZXNjcmlwdGlvbjogJycNCiAgICAgIH0NCiAgICAgIC8vIOenu+mZpOagoemqjOinhOWImQ0KICAgICAgdGhpcy4kcmVmcy5yb2xlRm9ybS5yZXNldEZpZWxkcygpDQogICAgICB0aGlzLnNob3dEaWFsb2cgPSBmYWxzZQ0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/setting","sourcesContent":["<template>\r\n  <div class=\"dashboard-container\">\r\n    <div class=\"app-container\">\r\n      <!-- 内容 -->\r\n      <el-card>\r\n        <el-tabs>\r\n          <!-- 控制栏 -->\r\n          <!-- 角色管理 -->\r\n          <el-tab-pane label=\"角色管理\">\r\n            <!-- 增加角色按钮 -->\r\n            <el-row style=\"height:60px\">\r\n              <el-button\r\n                icon=\"el-icon-plus\"\r\n                size=\"small\"\r\n                type=\"primary\"\r\n                @click=\"showDialog = true\"\r\n              >新增角色</el-button>\r\n            </el-row>\r\n            <!-- 表格 -->\r\n            <el-table border=\"\" :data=\"list\">\r\n              <!-- 表格头部 -->\r\n              <el-table-column type=\"index\" align=\"center\" label=\"序号\" width=\"120\" />\r\n              <el-table-column prop=\"name\" align=\"center\" label=\"角色名称\" width=\"240\" />\r\n              <el-table-column prop=\"description\" align=\"center\" label=\"描述\" />\r\n              <el-table-column align=\"center\" label=\"操作\">\r\n                <!-- 表格按钮 -->\r\n                <!-- 作用域插槽 可以获取到点击的id值 -->\r\n                <template slot-scope=\"{ row }\">\r\n                  <el-button size=\"small\" type=\"success\">分配权限</el-button>\r\n                  <el-button size=\"small\" type=\"primary\" @click=\"editRole(row.id)\">编辑</el-button>\r\n                  <el-button size=\"small\" type=\"danger\" @click=\"deleteRole(row.id)\">删除</el-button>\r\n                </template>\r\n              </el-table-column>\r\n            </el-table>\r\n            <!-- 分页组件 -->\r\n            <el-row type=\"flex\" justify=\"center\" align=\"middle\" style=\"height: 60px\">\r\n              <!-- 分页组件 -->\r\n              <el-pagination\r\n                :total=\"page.total\"\r\n                :current-page=\"page.page\"\r\n                :page-size=\"page.pagesize\"\r\n                layout=\"prev,pager,next\"\r\n                @current-change=\"changePage\"\r\n              />\r\n            </el-row>\r\n          </el-tab-pane>\r\n          <el-tab-pane label=\"公司信息\">\r\n            <!-- 提示信息 -->\r\n            <el-alert\r\n              title=\"对公司名称、公司地址、营业执照、公司地区的更新，将使得公司资料被重新审核，请谨慎修改\"\r\n              type=\"info\"\r\n              show-icon\r\n              :closable=\"false\"\r\n            />\r\n            <!-- 公司详情 -->\r\n            <el-form label-width=\"120px\" style=\"margin-top:50px\">\r\n              <el-form-item label=\"公司名称\">\r\n                <el-input v-model=\"formData.name\" disabled style=\"width:400px\" />\r\n              </el-form-item>\r\n              <el-form-item label=\"公司地址\">\r\n                <el-input v-model=\"formData.companyAddress\" disabled style=\"width:400px\" />\r\n              </el-form-item>\r\n              <el-form-item label=\"邮箱\">\r\n                <el-input v-model=\"formData.mailbox\" disabled style=\"width:400px\" />\r\n              </el-form-item>\r\n              <el-form-item label=\"备注\">\r\n                <el-input v-model=\"formData.mailbox\" type=\"textarea\" :rows=\"3\" disabled style=\"width:400px\" />\r\n              </el-form-item>\r\n            </el-form></el-tab-pane>\r\n        </el-tabs>\r\n      </el-card>\r\n    </div>\r\n    <!-- 编辑弹层 -->\r\n    <el-dialog :title=\"showTitle\" :visible=\"showDialog\" @close=\"btnCancel\">\r\n      <el-form ref=\"roleForm\" :model=\"roleForm\" :rules=\"rules\" label-width=\"120px\">\r\n        <el-form-item label=\"角色名称\" prop=\"name\">\r\n          <el-input v-model=\"roleForm.name\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"角色描述\">\r\n          <el-input v-model=\"roleForm.description\" />\r\n        </el-form-item>\r\n      </el-form>\r\n      <!-- 底部 -->\r\n      <el-row slot=\"footer\" type=\"flex\" justify=\"center\">\r\n        <el-col :span=\"6\">\r\n          <el-button size=\"small\" @click=\"btnCancel\">取消</el-button>\r\n          <el-button size=\"small\" type=\"primary\" @click=\"btnOK\">确定</el-button>\r\n        </el-col>\r\n      </el-row>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getRoleList, getCompanyInfo, deleteRole, updateRole, getRoleDetail, addRole } from '@/api/setting'\r\nimport { mapGetters } from 'vuex'\r\nexport default {\r\n  data() {\r\n    return {\r\n      // 承接数组\r\n      list: [],\r\n      // 页码数\r\n      page: {\r\n        // 当前页码\r\n        page: 1,\r\n        // 每页的个数\r\n        pagesize: 10,\r\n        // 记录总数\r\n        total: 0\r\n      },\r\n      // 承接公司信息\r\n      formData: {\r\n        // 公司信息\r\n      },\r\n      showDialog: false,\r\n      // 接受表单数据\r\n      roleForm: {},\r\n      rules: {\r\n        name: [{ required: true,\r\n          message: '角色名称不能为空',\r\n          trigger: 'blur' }]\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.getRoleList() // 获取角色列表\r\n    this.getCompanyInfo() // 获取公司信息\r\n  },\r\n  // 进行结构，获取companyId\r\n  computed: {\r\n    ...mapGetters(['companyId']),\r\n    showTitle() {\r\n      return this.roleForm.id ? '编辑角色' : '新增角色'\r\n    }\r\n  },\r\n  methods: {\r\n    // 获取员工列表\r\n    async getRoleList() {\r\n      // 获取数据\r\n      const { total, rows } = await getRoleList(this.page)\r\n      this.page.total = total\r\n      this.list = rows\r\n    },\r\n    // 点击更换页码\r\n    changePage(NewPage) {\r\n      // newPage是当前点击的页码\r\n      // 将当前页码赋值给当前的最新页码\r\n      this.page.page = NewPage\r\n      this.getRoleList()\r\n    },\r\n    // 获取公司信息\r\n    async getCompanyInfo() {\r\n      // 把获取的信息，用formData承接\r\n      this.formData = await getCompanyInfo(this.getCompanyInfo)\r\n    },\r\n    // 删除员工信息\r\n    async deleteRole(id) {\r\n      try {\r\n        await this.$confirm('确认删除该角色吗')\r\n        // 只有点击了确定 才能进入到下方\r\n        await deleteRole(id) // 调用删除接口\r\n        this.getRoleList() // 重新加载数据\r\n        this.$message.success('删除角色成功')\r\n      } catch (error) {\r\n        console.log(error)\r\n      }\r\n    },\r\n    // 编辑员工信息\r\n    async editRole(id) {\r\n      this.roleForm = await getRoleDetail(id)\r\n      this.showDialog = true\r\n    },\r\n    // 点击成功\r\n    async btnOK() {\r\n      await this.$refs.roleForm.validate()\r\n      // 只有校验通过的情况下 才会执行await的下方内容\r\n      // roleForm这个对象有id就是编辑 没有id就是新增\r\n      if (this.roleForm.id) {\r\n        await updateRole(this.roleForm)\r\n      } else {\r\n        // 新增业务\r\n        await addRole(this.roleForm)\r\n      }\r\n      // 重新拉取数据\r\n      this.getRoleList()\r\n      this.$message.success('操作成功')\r\n      // 触发关闭事件\r\n      this.showDialog = false\r\n    },\r\n    btnCancel() {\r\n      this.roleForm = {\r\n        name: '',\r\n        description: ''\r\n      }\r\n      // 移除校验规则\r\n      this.$refs.roleForm.resetFields()\r\n      this.showDialog = false\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n"]}]}